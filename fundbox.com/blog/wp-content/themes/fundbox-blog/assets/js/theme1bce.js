jQuery(document).ready(function($){$(".newsletter-box form").submit(function(e){e.preventDefault();var currentForm=$(this);currentForm.children(".error").removeClass("error");currentForm.children(".error_msg").html("");if(currentForm.hasClass("checkingRecaptcha"))return;if(currentForm.hasClass("submitting")&&currentForm.data("token")!=""){$.post(ajax_object.ajax_url,{action:"fundbox_pardot_submission",email:currentForm.children("[name=email]").val(),_wpnonce:currentForm.data("nonce"),token:currentForm.data("token"),query:window.location.search.substring(1)},function(){}).fail(function(){currentForm.children(".error_msg").html("Sorry, an error ocurred. Please refresh the page and try again later.");}).always(function(response){currentForm.removeClass("submitting");if(response=="99"){currentForm.html('<div class="result"><div><h2>Thanks!</h2><p>You are now subscribed.</p></div><div class="success-checkmark"><div class="check-icon"><span class="icon-line line-tip"></span><span class="icon-line line-long"></span><div class="icon-circle"></div><div class="icon-fix"></div></div></div></div>');return;}
switch(response){case "2":currentForm.children("[name=email]").addClass("error");currentForm.children("[name=email]").focus();currentForm.children(".error_msg").html("Please insert a valid email.");break;case "3":case "4":currentForm.data("token","");currentForm.children(".error_msg").html("Please revalidate reCAPTCHA.");currentForm.addClass("submitting checkingRecaptcha");grecaptcha.reset();grecaptcha.execute();break;case "0":case "1":case "5":default:currentForm.children(".error_msg").html("Sorry, an error ocurred. Please refresh the page and try again later.");break;}});}else{currentForm.addClass("submitting checkingRecaptcha");grecaptcha.execute();}});if($("#fundbox-slider").length>0){$("#fundbox-slider").slippry({adaptiveHeight:false,captions:false,hideOnEnd:false,pause:6000});}
$(".popup, .socialshare").click(function(){var width=575,height=450,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts="status=1"+",width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"_blank",opts);return false;});$("#head nav ul li.menu-item-has-children > a").click(function(e){if($(window).width()<992){e.preventDefault();$(this).parent().toggleClass("open");}});$("#toggle-menu").click(function(e){e.preventDefault();$("#head nav > ul").toggle();$("html, body").toggleClass("menu-open");});$("#head nav ul li.button").click(function(e){e.preventDefault();window.location.href="tel://+18555277707";});$("#head nav ul li.button a").click(function(e){e.stopPropagation();});$("#toggle-search").click(function(e){e.preventDefault();$("#hidden-search").toggle();});if($(".post-subscribe.fixed").length>0){$(".post-subscribe.fixed .close").click(function(e){e.preventDefault();$(".post-subscribe.fixed").remove();});$(window).scroll(function(){if($(window).scrollTop()>=$(".post-content").offset().top){$(".post-subscribe.fixed").stop();$(".post-subscribe.fixed").fadeTo(500,1);}else{$(".post-subscribe.fixed").stop();$(".post-subscribe.fixed").fadeTo(500,0);}});}
$(document).on("click","#more-related-posts",function(e){e.preventDefault();var button=$(this);button.css("pointer-events","none");button.html('<i class="fas fa-circle-notch fa-spin"></i>');var data={action:"fundbox_related",pagination:button.data("pagination"),ref_id:button.data("id")};$.post(ajax_object.ajax_url,data,function(){}).fail(function(){alert("Some error ocurred. Please try again later.");button.remove();}).always(function(response){if(response=="0"){button.html("That's All!");}else{button.before(response);button.remove();}});});$(document).on("click",".pagination.ajax a",function(e){e.preventDefault();var button=$(this),legendBackup=$(this).html(),query=button.data("query");query=$(query).text();button.css("pointer-events","none");button.html('<i class="fas fa-circle-notch fa-spin"></i>');var data={action:"fundbox_archive_posts_ajax",paged:button.data("paged"),query:query};$.post(ajax_object.ajax_url,data,function(){}).fail(function(){alert("Some error ocurred. Please try again later.");button.remove();}).always(function(response){if(response.search("|||")==-1){alert("Some error ocurred. Please try again later.");button.remove();}else{response=response.split("|||");button.parent().parent().before(response[0]);button.parent().parent().html(response[1]);}});});const slugify=(string)=>{if(!string)return string
const a='àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;'
const b='aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------'
const p=new RegExp(a.split('').join('|'),'g')
return string.toString().toLowerCase().replace(/\s+/g,'-').replace(p,c=>b.charAt(a.indexOf(c))).replace(/&/g,'-and-').replace(/[^\w\-]+/g,'').replace(/\-\-+/g,'-').replace(/^-+/,'').replace(/-+$/,'')}
const scrollOffset=90
const headingAmount=$('.single-content h2').length
const headingsSelector=headingAmount>1?'.single-content h2':'.single-content h3'
$(document).ready(function(){if($(headingsSelector).length<2)$('aside.post-toc h5').remove()
else $(headingsSelector).each((i,el)=>{const heading=$(el)
let text=heading.text()
if(!text)text=heading.find('span').text()
if(!text)text=heading.find('strong').text()
const hash='h-'+slugify(text)
heading.attr('id',hash)
$('#toc').append('<a href="#'+hash+'">'+text+'</a>')})
$('#toc a').click(function(){const hash=$(this).attr('href')
$('html, body').animate({scrollTop:$(hash).offset().top-scrollOffset},300)
window.location.hash=hash
return false})
$(window).bind('scroll',function(){const currentTop=$(window).scrollTop()
const elems=$(headingsSelector)
elems.each(function(){const elemTop=$(this).offset().top-scrollOffset
const elemBottom=elemTop+$(this).height()
if(currentTop>=elemTop&&currentTop<=elemBottom){const id=$(this).attr('id')
const navElem=$('a[href="#'+id+'"]')
navElem.addClass('active').siblings().removeClass('active')}})})});});function submitPardotForm(token){jQuery(".newsletter-box form.submitting.checkingRecaptcha").removeClass("checkingRecaptcha").data("token",token).submit();}